<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dive Flow v4</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Quicksand:wght@400;500;600;700&family=Baloo+2:wght@500;600;700;800&display=swap');

  *{margin:0;padding:0;box-sizing:border-box}
  :root{
    --deep:#0d1b3e;--tide:#1a5276;--pearl:#f0c27f;--cream:#f5e6ca;
    --coral:#e8a87c;--glass:#6bbfa3;--star:#c9658a;--shallow:#7eb8d4;
    --ink:#2a1f3d;--abyss:#080c1a;--surface:#2a8a9e;--shallows:#1e6e8e;--mid:#1a5276;--deep2:#0d1b3e;
  }
  body{font-family:'Quicksand',sans-serif;background:#0a0a12;color:#e8e6f0;padding:20px 16px 80px;min-height:100vh}

  .top-bar{max-width:820px;margin:0 auto 20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
  .top-title{font-family:'Fredoka One',cursive;font-size:1.3em;color:var(--pearl)}
  .flow-toggle{display:flex;gap:3px;background:rgba(255,255,255,.04);border-radius:10px;padding:3px}
  .flow-toggle button{padding:8px 18px;border-radius:8px;border:none;background:0;color:rgba(232,230,240,.4);font-family:'Quicksand',sans-serif;font-size:.8em;font-weight:700;cursor:pointer;transition:.2s}
  .flow-toggle button:hover{color:rgba(232,230,240,.7)}
  .flow-toggle button.on{background:rgba(240,194,127,.12);color:var(--pearl)}

  .flow-container{max-width:820px;margin:0 auto}
  .flow{display:none}.flow.on{display:block}

  .depth-strip{display:flex;gap:0;margin-bottom:24px;border-radius:12px;overflow:hidden;height:40px}
  .depth-seg{flex:1;display:flex;align-items:center;justify-content:center;font-size:.58em;font-weight:700;letter-spacing:1px;text-transform:uppercase;color:rgba(255,255,255,.5);cursor:pointer;transition:.2s;position:relative}
  .depth-seg:hover{filter:brightness(1.2)}
  .depth-seg.active{outline:2px solid var(--pearl);outline-offset:-2px;z-index:1}
  .depth-seg.active::after{content:'‚ñº';position:absolute;bottom:-14px;font-size:10px;color:var(--pearl)}

  .phone-wrap{display:flex;justify-content:center;margin-bottom:16px}
  .phone{width:375px;max-width:100%;border-radius:32px;overflow:hidden;border:2px solid rgba(255,255,255,.08)}
  .notch{height:44px;background:#000;position:relative}
  .notch::after{content:'';width:120px;height:28px;background:#000;border-radius:0 0 16px 16px;position:absolute;top:0;left:50%;transform:translateX(-50%)}
  .notch .time{font-size:.7em;font-weight:700;color:rgba(255,255,255,.6);position:absolute;left:20px;bottom:8px;z-index:1}
  .notch .icons{position:absolute;right:20px;bottom:8px;z-index:1;font-size:.65em;color:rgba(255,255,255,.5)}

  .screen{min-height:680px;display:none;flex-direction:column}.screen.on{display:flex}

  @keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
  @keyframes shimmer{0%{filter:brightness(1)}50%{filter:brightness(1.2)}100%{filter:brightness(1)}}
  @keyframes pulse{0%,100%{transform:scale(1);opacity:.8}50%{transform:scale(1.08);opacity:1}}
  .shim{animation:shimmer 3s ease-in-out infinite}
  .centered{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:0 32px;text-align:center}

  .btn{padding:14px;border-radius:12px;border:none;font-family:'Quicksand',sans-serif;font-weight:700;font-size:.95em;cursor:pointer;transition:.2s;width:100%;text-align:center}
  .btn-p{background:var(--pearl);color:var(--deep)}
  .btn-p:hover{background:#f5d08f;transform:translateY(-1px)}
  .btn-s{background:transparent;border:2px solid rgba(245,230,202,.15);color:var(--cream)}
  .btn-s:hover{border-color:rgba(245,230,202,.35)}
  .btn-leave{background:transparent;border:1.5px solid rgba(201,101,138,.18);color:var(--star);font-size:.85em}
  .input{padding:14px 18px;border-radius:12px;border:2px solid rgba(245,230,202,.1);background:rgba(255,255,255,.04);font-family:'Quicksand',sans-serif;font-size:.95em;color:var(--cream);outline:none;transition:.2s;width:100%}
  .input:focus{border-color:rgba(240,194,127,.3);background:rgba(255,255,255,.06)}
  .input::placeholder{color:rgba(232,230,240,.25)}
  .input-code{text-align:center;letter-spacing:6px;font-weight:700;font-size:1.1em;text-transform:uppercase}
  .back-link{font-size:.8em;color:rgba(232,230,240,.25);margin-top:8px;cursor:pointer;background:none;border:none;font-family:'Quicksand',sans-serif}
  .footer-quip{padding:14px;text-align:center;font-size:.65em;color:rgba(240,194,127,.18);font-weight:600}

  .info{max-width:375px;margin:0 auto;padding:16px 20px;background:rgba(255,255,255,.02);border:1px solid rgba(255,255,255,.04);border-radius:14px}

  .bg-surface{background:linear-gradient(180deg,var(--surface),var(--shallows) 40%,var(--mid) 75%,var(--deep2))}
  .bg-wading{background:linear-gradient(180deg,var(--shallows),var(--mid) 40%,var(--deep2) 85%,var(--abyss))}
  .bg-commit{background:linear-gradient(180deg,var(--mid),var(--deep2) 50%,var(--abyss))}
  .bg-descent{background:radial-gradient(ellipse at 50% 30%,rgba(13,27,62,.6),var(--abyss)),var(--abyss)}
  .bg-deep{background:var(--abyss)}
  .bg-surfacing{background:linear-gradient(180deg,var(--shallows),var(--mid) 40%,var(--deep2) 80%,var(--abyss))}

  .home-pearl{animation:float 4s ease-in-out infinite;margin-bottom:24px}
  .home-pearl svg{filter:drop-shadow(0 8px 24px rgba(240,194,127,.15))}
  .home-title{font-family:'Fredoka One',cursive;font-size:2em;color:var(--cream);margin-bottom:4px}
  .home-tag{font-size:.85em;color:rgba(240,194,127,.6);font-weight:600;margin-bottom:32px}
  .home-btns{width:100%;max-width:260px;display:flex;flex-direction:column;gap:12px}
  .bub-container{position:absolute;inset:0;pointer-events:none;overflow:hidden}
  .bub{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,255,255,.07),rgba(255,255,255,.01));animation:rise linear infinite}
  @keyframes rise{0%{transform:translateY(100%) scale(1);opacity:0}10%{opacity:.5}90%{opacity:.2}100%{transform:translateY(-50px) scale(.3);opacity:0}}

  .wade-pearl{animation:float 3s ease-in-out infinite;margin-bottom:18px}
  .wade-title{font-family:'Fredoka One',cursive;font-size:1.7em;color:var(--pearl);margin-bottom:4px}
  .wade-sub{font-size:.85em;color:rgba(245,230,202,.45);margin-bottom:24px}
  .wade-form{width:100%;max-width:260px;display:flex;flex-direction:column;gap:12px}

  .pick-pearl{animation:float 3s ease-in-out infinite;margin-bottom:14px}
  .pick-title{font-family:'Fredoka One',cursive;font-size:1.5em;color:var(--pearl);margin-bottom:4px}
  .pick-sub{font-size:.82em;color:rgba(245,230,202,.4);margin-bottom:20px}
  .pearl-cards{display:flex;gap:12px;width:100%;max-width:300px;overflow-x:auto;padding:4px;scroll-snap-type:x mandatory}
  .pearl-card{min-width:140px;flex-shrink:0;scroll-snap-align:center;border-radius:16px;padding:18px 14px;border:2px solid rgba(255,255,255,.06);background:rgba(255,255,255,.03);cursor:pointer;transition:.2s;text-align:left;position:relative}
  .pearl-card:hover{border-color:rgba(240,194,127,.2);background:rgba(255,255,255,.05)}
  .pearl-card.sel{border-color:var(--pearl);background:rgba(240,194,127,.06)}
  .pearl-card .p-badge{position:absolute;top:10px;right:10px;font-size:.5em;background:rgba(240,194,127,.1);color:var(--pearl);padding:2px 8px;border-radius:6px;font-weight:700;letter-spacing:.5px}
  .pearl-card .p-icon{font-size:1.8em;margin-bottom:8px}
  .pearl-card .p-name{font-family:'Baloo 2',cursive;font-size:.95em;color:var(--cream);margin-bottom:2px}
  .pearl-card .p-desc{font-size:.68em;color:rgba(232,230,240,.4);line-height:1.4;margin-bottom:8px}
  .pearl-card .p-players{font-size:.6em;background:rgba(126,184,212,.1);color:var(--shallow);padding:3px 8px;border-radius:6px;display:inline-block;font-weight:700}
  .pick-btn{width:100%;max-width:300px;margin-top:16px}

  .load-pearl{animation:pulse 2s ease-in-out infinite;margin-bottom:20px}
  .load-title{font-family:'Fredoka One',cursive;font-size:1.3em;color:var(--pearl);margin-bottom:4px}
  .load-sub{font-size:.78em;color:rgba(232,230,240,.22)}
  .load-dots{display:flex;gap:6px;margin-top:14px}
  .ld{width:6px;height:6px;border-radius:50%;background:rgba(240,194,127,.25);animation:dp 1.4s ease-in-out infinite}
  .ld:nth-child(2){animation-delay:.2s}.ld:nth-child(3){animation-delay:.4s}
  @keyframes dp{0%,100%{opacity:.25;transform:scale(1)}50%{opacity:1;transform:scale(1.4)}}

  /* The Deep */
  .deep-bar{display:flex;align-items:center;padding:12px 16px;background:rgba(13,27,62,.5);border-bottom:1px solid rgba(255,255,255,.04)}
  .deep-bar-pearl{width:30px;height:30px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;background:rgba(240,194,127,.06);border:1.5px solid rgba(240,194,127,.1);flex-shrink:0;transition:.2s}
  .deep-bar-pearl:hover{background:rgba(240,194,127,.12)}
  .deep-bar-name{font-family:'Baloo 2',cursive;font-size:.92em;color:var(--cream);flex:1;margin-left:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
  .deep-bar-action{font-size:.7em;padding:6px 14px;border-radius:8px;font-family:'Quicksand',sans-serif;font-weight:700;cursor:pointer;transition:.2s;flex-shrink:0;margin-left:8px;border:1.5px solid rgba(240,194,127,.3);color:var(--pearl);background:none}
  .deep-bar-action:hover{border-color:rgba(240,194,127,.5);background:rgba(240,194,127,.06)}
  .deep-bar-action.hidden{visibility:hidden;pointer-events:none}

  .deep-content{flex:1;overflow-y:auto;display:flex;flex-direction:column}
  .deep-state{display:none;flex-direction:column;flex:1}.deep-state.on{display:flex}

  .lby{padding:16px;flex:1}
  .lby-code-sec{text-align:center;padding:8px 0 18px}
  .code-label{font-size:.62em;text-transform:uppercase;letter-spacing:3px;color:rgba(240,194,127,.35);font-weight:700;margin-bottom:4px}
  .code-big{font-family:'Fredoka One',cursive;font-size:2.2em;color:var(--cream);letter-spacing:6px;margin-bottom:6px}
  .code-link{font-size:.75em;color:var(--shallow);font-weight:600;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:5px}
  .sec-label{font-size:.65em;text-transform:uppercase;letter-spacing:2px;color:rgba(232,230,240,.25);font-weight:700;margin-bottom:8px;display:flex;justify-content:space-between}
  .teams{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-bottom:18px}
  .team-head{font-size:.7em;font-weight:700;display:flex;align-items:center;gap:5px;margin-bottom:4px}
  .team-a-h{color:var(--shallow)}.team-b-h{color:var(--coral)}
  .t-dot{width:7px;height:7px;border-radius:50%}
  .p-card{padding:9px 10px;border-radius:10px;display:flex;align-items:center;gap:8px;margin-bottom:6px}
  .p-card-a{background:rgba(126,184,212,.05);border:1.5px solid rgba(126,184,212,.1)}
  .p-card-b{background:rgba(232,168,124,.05);border:1.5px solid rgba(232,168,124,.1)}
  .p-card-bot{opacity:.45}
  .p-card-away{opacity:.5;border-style:dashed}
  .p-av{width:28px;height:28px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:.7em;font-weight:700;color:#fff}
  .p-av-a{background:rgba(126,184,212,.2)}.p-av-b{background:rgba(232,168,124,.2)}.p-av-bot{background:rgba(255,255,255,.06)}
  .p-nm{font-size:.82em;font-weight:700;color:var(--cream)}
  .p-role{font-size:.55em;text-transform:uppercase;letter-spacing:1px;font-weight:700}
  .p-role-o{color:var(--pearl)}.p-role-b{color:rgba(232,230,240,.2)}
  .p-role-lobby{color:var(--shallow)}
  .pts-row{display:flex;gap:6px;margin-bottom:16px}
  .pts-btn{flex:1;padding:10px;border-radius:9px;border:2px solid rgba(255,255,255,.05);background:rgba(255,255,255,.02);font-family:'Quicksand',sans-serif;font-size:.9em;font-weight:700;color:rgba(232,230,240,.35);cursor:pointer;transition:.2s}
  .pts-btn.sel{border-color:var(--pearl);background:rgba(240,194,127,.06);color:var(--pearl)}
  .lby-actions{padding:0 16px 8px;display:flex;flex-direction:column;gap:8px}
  .lby-hint{font-size:.68em;color:rgba(232,230,240,.18);text-align:center;padding:6px 0 12px}

  .game-progress{display:flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;background:rgba(240,194,127,.04);border-bottom:1px solid rgba(240,194,127,.06)}
  .gp-dot{width:6px;height:6px;border-radius:50%;background:var(--glass);animation:dp 1.4s ease-in-out infinite}
  .gp-text{font-size:.75em;color:rgba(232,230,240,.4);font-weight:600}
  .gp-turn{font-size:.75em;color:var(--pearl);font-weight:700}

  .game-scores{display:flex;align-items:center;justify-content:center;gap:12px;padding:10px 16px;font-size:.8em;font-weight:700}
  .gs-a{color:var(--shallow)}.gs-vs{color:rgba(232,230,240,.15);font-size:.7em}.gs-b{color:var(--coral)}
  .gs-you{font-size:.55em;background:rgba(240,194,127,.1);color:var(--pearl);padding:1px 5px;border-radius:3px;margin-left:3px;font-weight:700}
  .gs-target{font-size:.65em;color:rgba(232,230,240,.12);font-weight:600;margin-left:auto}
  .game-area{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:16px}
  .game-placeholder{font-size:.85em;color:rgba(232,230,240,.2);text-align:center;line-height:1.7}
  .game-placeholder strong{color:rgba(232,230,240,.35)}

  .waiting{text-align:center;padding:20px 0}
  .waiting-text{font-size:.88em;color:rgba(232,230,240,.3);font-weight:600;margin-bottom:10px}
  .waiting-dots{display:flex;gap:6px;justify-content:center}

  .post-pearl{animation:float 3s ease-in-out infinite;margin-bottom:18px}
  .post-title{font-family:'Fredoka One',cursive;font-size:1.7em;color:var(--pearl);margin-bottom:4px}
  .post-sub{font-size:.85em;color:rgba(245,230,202,.45);margin-bottom:24px}
  .post-scores{display:flex;gap:20px;margin-bottom:28px}
  .post-team{text-align:center}
  .post-tl{font-size:.65em;text-transform:uppercase;letter-spacing:2px;font-weight:700;margin-bottom:2px}
  .post-ts{font-family:'Fredoka One',cursive;font-size:2em}
  .post-a .post-tl{color:var(--shallow)}.post-a .post-ts{color:var(--shallow)}
  .post-b .post-tl{color:var(--coral)}.post-b .post-ts{color:var(--coral)}
  .post-div{color:rgba(232,230,240,.12);font-size:1.2em;align-self:center}
  .post-btns{width:100%;max-width:240px;display:flex;flex-direction:column;gap:10px}
  .post-hint{font-size:.7em;color:rgba(232,230,240,.18);margin-top:10px}

  @media(max-width:420px){.phone{width:100%;border-radius:24px}.depth-strip{height:32px}.depth-seg{font-size:.45em;letter-spacing:0}}
</style>
</head>
<body>

<div class="top-bar">
  <div class="top-title">The Dive v4</div>
  <div class="flow-toggle" id="ftog">
    <button class="on" data-f="host">Host Flow</button>
    <button data-f="guest">Guest Flow</button>
  </div>
</div>

<div class="flow-container">

<!-- ===== HOST ===== -->
<div class="flow on" id="f-host">
  <div class="depth-strip">
    <div class="depth-seg active" style="background:var(--surface)" data-screen="h-home">Surface</div>
    <div class="depth-seg" style="background:var(--shallows)" data-screen="h-name">Wading</div>
    <div class="depth-seg" style="background:var(--mid)" data-screen="h-pick">Choosing</div>
    <div class="depth-seg" style="background:linear-gradient(90deg,var(--mid),var(--abyss))" data-screen="h-load">Descent</div>
    <div class="depth-seg" style="background:var(--abyss)" data-screen="h-deep">The Deep</div>
    <div class="depth-seg" style="background:var(--shallows)" data-screen="h-post">Surfacing</div>
  </div>
  <div class="phone-wrap"><div class="phone"><div class="notch"><span class="time">9:41</span><span class="icons">‚óè‚óè‚óè 100%</span></div>

    <!-- HOME -->
    <div class="screen bg-surface on" id="h-home" style="position:relative">
      <div class="bub-container" id="hbub1"></div>
      <div class="centered" style="position:relative;z-index:1">
        <div class="home-pearl"><svg width="96" height="96" viewBox="0 0 96 96"><defs><radialGradient id="hp1" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="50%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient><radialGradient id="hp1g" cx="50%" cy="50%"><stop offset="0%" stop-color="rgba(240,194,127,.15)"/><stop offset="100%" stop-color="transparent"/></radialGradient></defs><circle cx="48" cy="48" r="46" fill="url(#hp1g)"/><circle cx="48" cy="48" r="34" fill="url(#hp1)" class="shim"/><ellipse cx="48" cy="48" rx="34" ry="11" fill="none" stroke="rgba(139,115,85,.12)" stroke-width=".7"/><ellipse cx="48" cy="48" rx="14" ry="34" fill="none" stroke="rgba(139,115,85,.09)" stroke-width=".7"/><ellipse cx="38" cy="34" rx="11" ry="8" fill="rgba(255,255,255,.15)" transform="rotate(-18,38,34)"/><circle cx="36" cy="32" r="3" fill="rgba(255,255,255,.3)"/><text x="76" y="18" font-size="9" fill="rgba(240,194,127,.4)">‚ú¶</text></svg></div>
        <div class="home-title">My Oyster World</div>
        <div class="home-tag">Every game is a pearl.</div>
        <div class="home-btns">
          <button class="btn btn-p" onclick="goScreen('h','h-name')">Dive In</button>
          <button class="btn btn-s" onclick="goScreen('h','h-name','join')">Join a Game</button>
        </div>
      </div>
      <div class="footer-quip">We make pearls faster than oysters. ü¶™</div>
    </div>

    <!-- NAME -->
    <div class="screen bg-wading" id="h-name">
      <div class="centered">
        <div class="wade-pearl"><svg width="64" height="64" viewBox="0 0 64 64"><defs><radialGradient id="wh1" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="55%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="32" cy="32" r="26" fill="url(#wh1)" class="shim"/><ellipse cx="24" cy="22" rx="8" ry="5" fill="rgba(255,255,255,.14)" transform="rotate(-18,24,22)"/><circle cx="23" cy="20" r="2" fill="rgba(255,255,255,.28)"/><text x="54" y="12" font-size="9" fill="rgba(240,194,127,.45)">‚ú¶</text></svg></div>
        <div class="wade-title">What's your name?</div>
        <div class="wade-sub">This is how other players will see you</div>
        <div class="wade-form">
          <input class="input" placeholder="Your name" value="Bobby"/>
          <button class="btn btn-p" onclick="goScreen('h','h-pick')">Next</button>
          <button class="back-link" onclick="goScreen('h','h-home')">‚Üê Back</button>
        </div>
      </div>
    </div>

    <!-- PICK PEARL -->
    <div class="screen bg-commit" id="h-pick">
      <div class="centered">
        <div class="pick-pearl"><svg width="48" height="48" viewBox="0 0 48 48"><defs><radialGradient id="pp1" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="55%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="24" cy="24" r="20" fill="url(#pp1)" class="shim"/><ellipse cx="18" cy="16" rx="6" ry="4" fill="rgba(255,255,255,.14)" transform="rotate(-18,18,16)"/><circle cx="17" cy="15" r="1.5" fill="rgba(255,255,255,.28)"/></svg></div>
        <div class="pick-title">Pick a Pearl</div>
        <div class="pick-sub">Each game is a treasure. Choose yours.</div>
        <div class="pearl-cards">
          <div class="pearl-card"><div class="p-badge">‚ú¶ PEARL</div><div class="p-icon">üòà</div><div class="p-name">Terrible People</div><div class="p-desc">Fill in the blanks. Be terrible.</div><span class="p-players">4+ players</span></div>
          <div class="pearl-card"><div class="p-badge">‚ú¶ PEARL</div><div class="p-icon">üî¥</div><div class="p-name">4 Kate</div><div class="p-desc">Classic Connect 4. Drop pieces. Get four in a row.</div><span class="p-players">2 players</span></div>
          <div class="pearl-card sel"><div class="p-badge">‚ú¶ PEARL</div><div class="p-icon">üÉè</div><div class="p-name">Who's Deal?</div><div class="p-desc">Classic Euchre. Pick trump. Take tricks. Talk trash.</div><span class="p-players">4 players</span></div>
        </div>
        <button class="btn btn-p pick-btn" onclick="goScreen('h','h-load')">Crack It Open</button>
        <button class="back-link" onclick="goScreen('h','h-name')">‚Üê Back</button>
      </div>
    </div>

    <!-- DESCENT -->
    <div class="screen bg-descent" id="h-load">
      <div class="centered">
        <div class="load-pearl"><svg width="56" height="56" viewBox="0 0 56 56"><defs><radialGradient id="ld1" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="55%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="28" cy="28" r="22" fill="url(#ld1)"/><ellipse cx="22" cy="20" rx="7" ry="5" fill="rgba(255,255,255,.14)" transform="rotate(-18,22,20)"/><circle cx="21" cy="18" r="2" fill="rgba(255,255,255,.28)"/></svg></div>
        <div class="load-title">Cracking open your pearl...</div>
        <div class="load-sub">Who's Deal? ¬∑ 4 players</div>
        <div class="load-dots"><div class="ld"></div><div class="ld"></div><div class="ld"></div></div>
      </div>
    </div>

    <!-- THE DEEP -->
    <div class="screen bg-deep" id="h-deep">
      <div class="deep-bar">
        <div class="deep-bar-pearl" onclick="goScreen('h','h-home')"><svg width="18" height="18" viewBox="0 0 18 18"><defs><radialGradient id="db1" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="9" cy="9" r="7" fill="url(#db1)"/></svg></div>
        <div class="deep-bar-name">Who's Deal?</div>
        <button class="deep-bar-action hidden" id="h-action" onclick="deepAction('h')">Lobby</button>
      </div>
      <div class="deep-content">
        <!-- Pre-game -->
        <div class="deep-state on" id="h-pre">
          <div class="lby">
            <div class="lby-code-sec"><div class="code-label">Game Code</div><div class="code-big">JVKL6M</div><div class="code-link">üîó Copy invite link</div></div>
            <div class="sec-label">Teams <span>1/4 humans</span></div>
            <div class="teams">
              <div>
                <div class="team-head team-a-h"><div class="t-dot" style="background:var(--shallow)"></div> Team A</div>
                <div class="p-card p-card-a"><div class="p-av p-av-a">B</div><div><div class="p-nm">Bobby</div><div class="p-role p-role-o">OWNER</div></div></div>
                <div class="p-card p-card-a p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Bob</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
              <div>
                <div class="team-head team-b-h"><div class="t-dot" style="background:var(--coral)"></div> Team B</div>
                <div class="p-card p-card-b p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Alice</div><div class="p-role p-role-b">BOT</div></div></div>
                <div class="p-card p-card-b p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Charlie</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
            </div>
            <div class="sec-label">Points to Win</div>
            <div class="pts-row"><button class="pts-btn">5</button><button class="pts-btn">7</button><button class="pts-btn sel">10</button><button class="pts-btn">11</button></div>
          </div>
          <div class="lby-actions">
            <button class="btn btn-p" onclick="setDeepState('h','ingame')">Start Game</button>
            <button class="btn btn-leave" onclick="goScreen('h','h-home')">Leave Game</button>
          </div>
          <div class="lby-hint">Share the code ‚Äî the more the merrier</div>
        </div>

        <!-- In game -->
        <div class="deep-state" id="h-ingame">
          <div class="game-scores">
            <span class="gs-a">‚óè A 3<span class="gs-you">YOU</span></span>
            <span class="gs-vs">vs</span>
            <span class="gs-b">‚óè B 5</span>
            <span class="gs-target">to 10</span>
          </div>
          <div class="game-area">
            <div class="game-placeholder">
              <strong>Game Area</strong><br><br>
              Tap <strong>Lobby</strong> in the top bar<br>to go back to lobby.<br>A bot covers your seat.<br><br>
              Tap the <strong>pearl</strong> to go home.<br><br>
              <span style="color:var(--pearl);font-size:.85em">üÉè Who's Deal? ‚Äî Euchre</span>
            </div>
          </div>
        </div>

        <!-- Lobby mid-game -->
        <div class="deep-state" id="h-midlobby">
          <div class="game-progress">
            <div class="gp-dot"></div>
            <span class="gp-text">Game in progress</span>
            <span class="gp-turn">¬∑ Bobby's turn</span>
          </div>
          <div class="lby">
            <div class="lby-code-sec"><div class="code-label">Game Code</div><div class="code-big">JVKL6M</div><div class="code-link">üîó Copy invite link</div></div>
            <div class="sec-label">Teams <span>2/4 humans</span></div>
            <div class="teams">
              <div>
                <div class="team-head team-a-h"><div class="t-dot" style="background:var(--shallow)"></div> Team A</div>
                <div class="p-card p-card-a"><div class="p-av p-av-a">B</div><div><div class="p-nm">Bobby</div><div class="p-role p-role-o">OWNER</div></div></div>
                <div class="p-card p-card-a p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Bob</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
              <div>
                <div class="team-head team-b-h"><div class="t-dot" style="background:var(--coral)"></div> Team B</div>
                <div class="p-card p-card-b p-card-away"><div class="p-av p-av-b" style="opacity:.5">K</div><div><div class="p-nm" style="opacity:.6">Kate</div><div class="p-role p-role-lobby">IN LOBBY ¬∑ BOT COVERING</div></div></div>
                <div class="p-card p-card-b p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Charlie</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
            </div>
          </div>
          <div class="lby-actions">
            <button class="btn btn-p" onclick="setDeepState('h','ingame')">Join Game</button>
            <button class="btn btn-leave" onclick="goScreen('h','h-home')">Leave Game</button>
          </div>
          <div class="lby-hint">Your seat is being kept warm by a bot</div>
        </div>
      </div>
    </div>

    <!-- SURFACING -->
    <div class="screen bg-surfacing" id="h-post">
      <div class="centered">
        <div class="post-pearl"><svg width="64" height="64" viewBox="0 0 64 64"><defs><radialGradient id="sp1" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="55%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="32" cy="32" r="26" fill="url(#sp1)" class="shim"/><ellipse cx="24" cy="22" rx="8" ry="5" fill="rgba(255,255,255,.14)" transform="rotate(-18,24,22)"/><circle cx="23" cy="20" r="2" fill="rgba(255,255,255,.28)"/><text x="54" y="12" font-size="9" fill="rgba(240,194,127,.45)">‚ú¶</text></svg></div>
        <div class="post-title">Pearl Played!</div>
        <div class="post-sub">Who's Deal? ¬∑ 23 min</div>
        <div class="post-scores">
          <div class="post-team post-a"><div class="post-tl">Team A</div><div class="post-ts">10</div></div>
          <div class="post-div">‚Äî</div>
          <div class="post-team post-b"><div class="post-tl">Team B</div><div class="post-ts">7</div></div>
        </div>
        <div class="post-btns">
          <button class="btn btn-p" onclick="goScreen('h','h-deep');setDeepState('h','ingame')">Play Again</button>
          <button class="btn btn-s" onclick="goScreen('h','h-deep');setDeepState('h','pre')">Back to Lobby</button>
          <button class="btn btn-leave" onclick="goScreen('h','h-home')">Leave Game</button>
        </div>
        <div class="post-hint">Another pearl played. Ready for the next one?</div>
      </div>
    </div>

  </div></div>
  <div class="info" id="info-host"></div>
</div>

<!-- ===== GUEST ===== -->
<div class="flow" id="f-guest">
  <div class="depth-strip">
    <div class="depth-seg active" style="background:var(--surface)" data-screen="g-home">Surface</div>
    <div class="depth-seg" style="background:var(--shallows)" data-screen="g-join">Wading</div>
    <div class="depth-seg" style="background:linear-gradient(90deg,var(--mid),var(--abyss))" data-screen="g-load">Descent</div>
    <div class="depth-seg" style="background:var(--abyss)" data-screen="g-deep">The Deep</div>
    <div class="depth-seg" style="background:var(--shallows)" data-screen="g-post">Surfacing</div>
  </div>
  <div class="phone-wrap"><div class="phone"><div class="notch"><span class="time">9:41</span><span class="icons">‚óè‚óè‚óè 100%</span></div>

    <!-- HOME -->
    <div class="screen bg-surface on" id="g-home" style="position:relative">
      <div class="bub-container" id="hbub2"></div>
      <div class="centered" style="position:relative;z-index:1">
        <div class="home-pearl"><svg width="96" height="96" viewBox="0 0 96 96"><defs><radialGradient id="hp2" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="50%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient><radialGradient id="hp2g" cx="50%" cy="50%"><stop offset="0%" stop-color="rgba(240,194,127,.15)"/><stop offset="100%" stop-color="transparent"/></radialGradient></defs><circle cx="48" cy="48" r="46" fill="url(#hp2g)"/><circle cx="48" cy="48" r="34" fill="url(#hp2)" class="shim"/><ellipse cx="48" cy="48" rx="34" ry="11" fill="none" stroke="rgba(139,115,85,.12)" stroke-width=".7"/><ellipse cx="48" cy="48" rx="14" ry="34" fill="none" stroke="rgba(139,115,85,.09)" stroke-width=".7"/><ellipse cx="38" cy="34" rx="11" ry="8" fill="rgba(255,255,255,.15)" transform="rotate(-18,38,34)"/><circle cx="36" cy="32" r="3" fill="rgba(255,255,255,.3)"/><text x="76" y="18" font-size="9" fill="rgba(240,194,127,.4)">‚ú¶</text></svg></div>
        <div class="home-title">My Oyster World</div>
        <div class="home-tag">Every game is a pearl.</div>
        <div class="home-btns">
          <button class="btn btn-p" onclick="goScreen('g','g-join')">Dive In</button>
          <button class="btn btn-s" onclick="goScreen('g','g-join')">Join a Game</button>
        </div>
      </div>
      <div class="footer-quip">We make pearls faster than oysters. ü¶™</div>
    </div>

    <!-- JOIN -->
    <div class="screen bg-wading" id="g-join">
      <div class="centered">
        <div class="wade-pearl"><svg width="64" height="64" viewBox="0 0 64 64"><defs><radialGradient id="wg1" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="55%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="32" cy="32" r="26" fill="url(#wg1)" class="shim"/><ellipse cx="24" cy="22" rx="8" ry="5" fill="rgba(255,255,255,.14)" transform="rotate(-18,24,22)"/><circle cx="23" cy="20" r="2" fill="rgba(255,255,255,.28)"/><text x="54" y="12" font-size="9" fill="rgba(240,194,127,.45)">‚ú¶</text></svg></div>
        <div class="wade-title">Join a Game</div>
        <div class="wade-sub">Enter your name and the code you were given</div>
        <div class="wade-form">
          <input class="input" placeholder="Your name" value="Kate"/>
          <input class="input input-code" placeholder="GAME CODE" value="JVKL6M"/>
          <button class="btn btn-p" onclick="goScreen('g','g-load')">Dive In</button>
          <button class="back-link" onclick="goScreen('g','g-home')">‚Üê Back</button>
        </div>
      </div>
    </div>

    <!-- DESCENT -->
    <div class="screen bg-descent" id="g-load">
      <div class="centered">
        <div class="load-pearl"><svg width="56" height="56" viewBox="0 0 56 56"><defs><radialGradient id="ld2" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="55%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="28" cy="28" r="22" fill="url(#ld2)"/><ellipse cx="22" cy="20" rx="7" ry="5" fill="rgba(255,255,255,.14)" transform="rotate(-18,22,20)"/><circle cx="21" cy="18" r="2" fill="rgba(255,255,255,.28)"/></svg></div>
        <div class="load-title">Diving in...</div>
        <div class="load-sub">Joining Who's Deal?</div>
        <div class="load-dots"><div class="ld"></div><div class="ld"></div><div class="ld"></div></div>
      </div>
    </div>

    <!-- THE DEEP -->
    <div class="screen bg-deep" id="g-deep">
      <div class="deep-bar">
        <div class="deep-bar-pearl" onclick="goScreen('g','g-home')"><svg width="18" height="18" viewBox="0 0 18 18"><defs><radialGradient id="db2" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="9" cy="9" r="7" fill="url(#db2)"/></svg></div>
        <div class="deep-bar-name">Who's Deal?</div>
        <button class="deep-bar-action hidden" id="g-action" onclick="deepAction('g')">Lobby</button>
      </div>
      <div class="deep-content">
        <!-- Pre-game waiting -->
        <div class="deep-state on" id="g-pre">
          <div class="lby">
            <div class="lby-code-sec"><div class="code-label">Game Code</div><div class="code-big">JVKL6M</div><div class="code-link">üîó Copy invite link</div></div>
            <div class="sec-label">Teams <span>2/4 humans</span></div>
            <div class="teams">
              <div>
                <div class="team-head team-a-h"><div class="t-dot" style="background:var(--shallow)"></div> Team A</div>
                <div class="p-card p-card-a"><div class="p-av p-av-a">B</div><div><div class="p-nm">Bobby</div><div class="p-role p-role-o">OWNER</div></div></div>
                <div class="p-card p-card-a p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Bob</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
              <div>
                <div class="team-head team-b-h"><div class="t-dot" style="background:var(--coral)"></div> Team B</div>
                <div class="p-card p-card-b"><div class="p-av p-av-b">K</div><div><div class="p-nm">Kate</div></div></div>
                <div class="p-card p-card-b p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Charlie</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
            </div>
          </div>
          <div class="waiting"><div class="waiting-text">Waiting for host to start...</div><div class="waiting-dots"><div class="ld"></div><div class="ld"></div><div class="ld"></div></div></div>
          <div class="lby-actions"><button class="btn btn-leave" onclick="goScreen('g','g-home')">Leave Game</button></div>
        </div>

        <!-- In game -->
        <div class="deep-state" id="g-ingame">
          <div class="game-scores">
            <span class="gs-a">‚óè A 3</span><span class="gs-vs">vs</span><span class="gs-b">‚óè B 5<span class="gs-you">YOU</span></span><span class="gs-target">to 10</span>
          </div>
          <div class="game-area">
            <div class="game-placeholder">
              <strong>Game Area</strong><br><br>
              Tap <strong>Lobby</strong> in the top bar<br>to step out. Bot covers your seat.<br><br>
              Tap the <strong>pearl</strong> to go home.<br><br>
              <span style="color:var(--coral);font-size:.85em">üÉè Who's Deal? ‚Äî Euchre</span>
            </div>
          </div>
        </div>

        <!-- Lobby mid-game -->
        <div class="deep-state" id="g-midlobby">
          <div class="game-progress">
            <div class="gp-dot"></div>
            <span class="gp-text">Game in progress</span>
            <span class="gp-turn">¬∑ Bobby's turn</span>
          </div>
          <div class="lby">
            <div class="lby-code-sec"><div class="code-label">Game Code</div><div class="code-big">JVKL6M</div><div class="code-link">üîó Copy invite link</div></div>
            <div class="sec-label">Teams <span>2/4 humans</span></div>
            <div class="teams">
              <div>
                <div class="team-head team-a-h"><div class="t-dot" style="background:var(--shallow)"></div> Team A</div>
                <div class="p-card p-card-a"><div class="p-av p-av-a">B</div><div><div class="p-nm">Bobby</div><div class="p-role p-role-o">OWNER</div></div></div>
                <div class="p-card p-card-a p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Bob</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
              <div>
                <div class="team-head team-b-h"><div class="t-dot" style="background:var(--coral)"></div> Team B</div>
                <div class="p-card p-card-b p-card-away"><div class="p-av p-av-b" style="opacity:.5">K</div><div><div class="p-nm" style="opacity:.6">Kate</div><div class="p-role p-role-lobby">IN LOBBY ¬∑ BOT COVERING</div></div></div>
                <div class="p-card p-card-b p-card-bot"><div class="p-av p-av-bot">ü§ñ</div><div><div class="p-nm">Bot Charlie</div><div class="p-role p-role-b">BOT</div></div></div>
              </div>
            </div>
          </div>
          <div class="lby-actions">
            <button class="btn btn-p" onclick="setDeepState('g','ingame')">Join Game</button>
            <button class="btn btn-leave" onclick="goScreen('g','g-home')">Leave Game</button>
          </div>
          <div class="lby-hint">Your seat is being kept warm by a bot</div>
        </div>
      </div>
    </div>

    <!-- SURFACING -->
    <div class="screen bg-surfacing" id="g-post">
      <div class="centered">
        <div class="post-pearl"><svg width="64" height="64" viewBox="0 0 64 64"><defs><radialGradient id="sp2" cx="38%" cy="30%"><stop offset="0%" stop-color="#fff"/><stop offset="20%" stop-color="#f5ece2"/><stop offset="55%" stop-color="#ead8c0"/><stop offset="100%" stop-color="#bfab8e"/></radialGradient></defs><circle cx="32" cy="32" r="26" fill="url(#sp2)" class="shim"/><ellipse cx="24" cy="22" rx="8" ry="5" fill="rgba(255,255,255,.14)" transform="rotate(-18,24,22)"/><circle cx="23" cy="20" r="2" fill="rgba(255,255,255,.28)"/><text x="54" y="12" font-size="9" fill="rgba(240,194,127,.45)">‚ú¶</text></svg></div>
        <div class="post-title">Pearl Played!</div>
        <div class="post-sub">Who's Deal? ¬∑ 23 min</div>
        <div class="post-scores">
          <div class="post-team post-a"><div class="post-tl">Team A</div><div class="post-ts">10</div></div>
          <div class="post-div">‚Äî</div>
          <div class="post-team post-b"><div class="post-tl">Team B</div><div class="post-ts">7</div></div>
        </div>
        <div class="post-btns">
          <button class="btn btn-p" onclick="goScreen('g','g-deep');setDeepState('g','ingame')">Play Again</button>
          <button class="btn btn-s" onclick="goScreen('g','g-deep');setDeepState('g','pre')">Back to Lobby</button>
          <button class="btn btn-leave" onclick="goScreen('g','g-home')">Leave Game</button>
        </div>
        <div class="post-hint">Another pearl played. Ready for the next one?</div>
      </div>
    </div>

  </div></div>
  <div class="info" id="info-guest"></div>
</div>

</div>

<script>
// Bubbles
['hbub1','hbub2'].forEach(id=>{const c=document.getElementById(id);if(!c)return;for(let i=0;i<10;i++){const b=document.createElement('div');b.className='bub';const s=Math.random()*14+3;b.style.width=s+'px';b.style.height=s+'px';b.style.left=Math.random()*100+'%';b.style.animationDuration=(Math.random()*12+6)+'s';b.style.animationDelay=(Math.random()*8)+'s';c.appendChild(b)}});

// Info data
const info={
  'h-home':{t:'Home ‚Äî Surface',d:'Pearl 96px. Lightest. "Dive In" starts host flow, "Join a Game" starts guest flow.'},
  'h-name':{t:'Name ‚Äî Wading',d:'Pearl 64px. Fredoka One. Mirrors Surfacing. "What\'s your name?" ‚Äî clear, no ambiguity.'},
  'h-pick':{t:'Pick a Pearl ‚Äî Choosing',d:'Pearl 48px. Each game is a pearl card. "Crack It Open" triggers descent.'},
  'h-load':{t:'Descent',d:'"Cracking open your pearl..." ‚Äî last branded moment before The Deep.'},
  'h-deep':{t:'The Deep ‚Äî Persistent Lobby',d:'Lobby is always alive. Pre-game: Start Game / Leave. In-game: Lobby button (gold outline) in top bar. Mid-game lobby: "Bobby\'s turn" status, Join Game (solid gold) to return, Leave Game below.'},
  'h-post':{t:'Surfacing ‚Äî Pearl Played',d:'Pearl 64px. Mirrors Wading. Play Again / Back to Lobby / Leave.'},
  'g-home':{t:'Home ‚Äî Surface',d:'Same entry. Guest taps "Join a Game."'},
  'g-join':{t:'Join ‚Äî Wading',d:'Pearl 64px. Name + code combined. Faster descent.'},
  'g-load':{t:'Descent',d:'"Diving in..." ‚Äî joining language. Straight to The Deep.'},
  'g-deep':{t:'The Deep ‚Äî Persistent Lobby',d:'Same architecture as host. Pre-game: waiting. In-game: same Lobby button. Mid-game lobby: same bot-covering, Join Game / Leave hierarchy.'},
  'g-post':{t:'Surfacing ‚Äî Pearl Played',d:'Identical to host. Everyone surfaces together.'}
};

function updateInfo(flow,sid){
  const d=info[sid];if(!d)return;
  document.getElementById('info-'+flow).innerHTML=`
    <div style="font-family:'Baloo 2',cursive;font-size:1em;color:var(--cream);margin-bottom:4px">${d.t}</div>
    <div style="font-size:.78em;color:rgba(232,230,240,.4);line-height:1.6">${d.d}</div>`;
}
updateInfo('host','h-home');updateInfo('guest','g-home');

// Navigate screens
function goScreen(flow,sid,mode){
  const prefix=flow==='h'?'h-':'g-';
  const container=document.getElementById('f-'+({h:'host',g:'guest'}[flow]));
  container.querySelectorAll('.screen').forEach(s=>{if(s.id.startsWith(prefix))s.classList.remove('on')});
  document.getElementById(sid).classList.add('on');
  // Update depth strip
  container.querySelectorAll('.depth-seg').forEach(s=>{
    s.classList.toggle('active',s.dataset.screen===sid);
  });
  updateInfo(flow==='h'?'host':'guest',sid);
  // Auto-advance from descent
  if(sid.endsWith('-load')){
    setTimeout(()=>{goScreen(flow,flow+'-deep');setDeepState(flow,'pre')},1500);
  }
}

// Deep state management
function setDeepState(flow,state){
  const deep=document.getElementById(flow+'-deep');
  deep.querySelectorAll('.deep-state').forEach(s=>s.classList.remove('on'));
  document.getElementById(flow+'-'+state).classList.add('on');
  // Update bar action
  const btn=document.getElementById(flow+'-action');
  if(state==='pre'){
    btn.classList.add('hidden');
  } else if(state==='ingame'){
    btn.classList.remove('hidden');
    btn.textContent='Lobby';
  } else if(state==='midlobby'){
    btn.classList.add('hidden');
  }
}

// Lobby button in top bar
function deepAction(flow){
  setDeepState(flow,'midlobby');
}

// Depth strip clicks
document.querySelectorAll('.depth-seg').forEach(seg=>{
  seg.addEventListener('click',()=>{
    const sid=seg.dataset.screen;
    const flow=sid.startsWith('h-')?'h':'g';
    goScreen(flow,sid);
    if(sid.endsWith('-deep'))setDeepState(flow,'pre');
  });
});

// Flow toggle
document.querySelectorAll('.flow-toggle button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.flow-toggle button').forEach(b=>b.classList.remove('on'));
    btn.classList.add('on');
    document.querySelectorAll('.flow').forEach(f=>f.classList.remove('on'));
    document.getElementById('f-'+btn.dataset.f).classList.add('on');
  });
});

// Pearl card selection
document.querySelectorAll('.pearl-card').forEach(c=>{
  c.addEventListener('click',()=>{
    c.parentElement.querySelectorAll('.pearl-card').forEach(p=>p.classList.remove('sel'));
    c.classList.add('sel');
  });
});
</script>
</body>
</html>